{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/archingupta/Desktop/cheffyfront/cheffy-app-client/screens/location.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Formik } from \"formik\";\nimport MapView, { PROVIDER_GOOGLE, Marker } from \"react-native-maps\";\nimport * as yup from \"yup\";\nimport * as Locate from \"expo-location\";\nimport axios from \"axios\";\nimport { mobileLink } from \"../links\";\nimport * as SecureStore from \"expo-secure-store\";\nvar ReviewSchema = yup.object({\n  flatnumber: yup.string().required(),\n  society: yup.string().required(),\n  area: yup.string().required(),\n  landmark: yup.string().required()\n});\nexport default function Location(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState({\n    lat: 0,\n    long: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      latlong = _useState2[0],\n      setlatlong = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      locationServiceEnabled = _useState4[0],\n      setLocationServiceEnabled = _useState4[1];\n\n  var _useState5 = useState(\"Wait, we are fetching you location...\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      displayCurrentAddress = _useState6[0],\n      setDisplayCurrentAddress = _useState6[1];\n\n  var onSubmitHandler = function onSubmitHandler() {\n    var params, token, axiosConfig, response, _params, _token, _axiosConfig, _response;\n\n    return _regeneratorRuntime.async(function onSubmitHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(navigation.state.params);\n\n            if (!(navigation.state.params.type === 1)) {\n              _context.next = 14;\n              break;\n            }\n\n            params = JSON.stringify({\n              user: navigation.state.params.phone_number,\n              email: navigation.state.params.emailid,\n              fullname: navigation.state.params.fullname,\n              gender: navigation.state.params.gender,\n              lat: latlong.lat,\n              lon: latlong.long\n            });\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync(\"token\"));\n\n          case 5:\n            token = _context.sent;\n            axiosConfig = {\n              headers: {\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n                Authorization: \"Bearer \" + token\n              }\n            };\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(axios.post(mobileLink + \"customer/\", params, axiosConfig));\n\n          case 9:\n            response = _context.sent;\n            console.log(response);\n            navigation.push(\"Homescreen\");\n            _context.next = 25;\n            break;\n\n          case 14:\n            _params = JSON.stringify({\n              email: navigation.state.params.emailid,\n              fullname: navigation.state.params.fullname,\n              gender: navigation.state.params.gender,\n              lat: latlong.lat,\n              lon: latlong.long,\n              place_of_work: navigation.state.params.placeofwork,\n              qualification: navigation.state.params.qualification,\n              yex: navigation.state.params.experience\n            });\n            console.log(\"params\", _params);\n            _context.next = 18;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync(\"token\"));\n\n          case 18:\n            _token = _context.sent;\n            _axiosConfig = {\n              headers: {\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n                Authorization: \"Bearer \" + _token\n              }\n            };\n            _context.next = 22;\n            return _regeneratorRuntime.awrap(axios.post(mobileLink + \"partner/\", _params, _axiosConfig));\n\n          case 22:\n            _response = _context.sent;\n            console.log(_response);\n            navigation.push(\"Homescreen\", {\n              'data': navigation.state.params,\n              'lat': latlong.lat,\n              'long': latlong.long\n            });\n\n          case 25:\n            console.log(\"going to other page\");\n\n          case 26:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    CheckIfLocationEnabled();\n    GetCurrentLocation();\n  }, []);\n\n  var GetCurrentLocation = function GetCurrentLocation() {\n    var _await$Locate$request, status, _await$Locate$getCurr, coords, latitude, longitude, response, _iterator, _step, item, address;\n\n    return _regeneratorRuntime.async(function GetCurrentLocation$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Locate.requestForegroundPermissionsAsync());\n\n          case 2:\n            _await$Locate$request = _context2.sent;\n            status = _await$Locate$request.status;\n\n            if (status !== \"granted\") {\n              Alert.alert(\"Permission not granted\", \"Allow the app to use location service.\", [{\n                text: \"OK\"\n              }], {\n                cancelable: false\n              });\n            }\n\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(Locate.getCurrentPositionAsync());\n\n          case 7:\n            _await$Locate$getCurr = _context2.sent;\n            coords = _await$Locate$getCurr.coords;\n\n            if (!coords) {\n              _context2.next = 17;\n              break;\n            }\n\n            latitude = coords.latitude, longitude = coords.longitude;\n            setlatlong({\n              lat: latitude,\n              long: longitude\n            });\n            console.log(latitude, \" longi\", longitude);\n            _context2.next = 15;\n            return _regeneratorRuntime.awrap(Locate.reverseGeocodeAsync({\n              latitude: latitude,\n              longitude: longitude\n            }));\n\n          case 15:\n            response = _context2.sent;\n\n            for (_iterator = _createForOfIteratorHelperLoose(response); !(_step = _iterator()).done;) {\n              item = _step.value;\n              address = item.name + \", \" + item.street + \", \" + item.postalCode + \", \" + item.city;\n              setDisplayCurrentAddress(address);\n            }\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var CheckIfLocationEnabled = function CheckIfLocationEnabled() {\n    var enabled;\n    return _regeneratorRuntime.async(function CheckIfLocationEnabled$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(Locate.hasServicesEnabledAsync());\n\n          case 2:\n            enabled = _context3.sent;\n\n            if (!enabled) {\n              Alert.alert(\"Location Service not enabled\", \"Please enable your location services to continue\", [{\n                text: \"OK\"\n              }], {\n                cancelable: false\n              });\n            } else {\n              setLocationServiceEnabled(enabled);\n            }\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: styles.container1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }), React.createElement(View, {\n    style: styles.container2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.container21,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 37\n    }\n  }, \"YOUR DETAILS\")), React.createElement(View, {\n    style: styles.container3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.container31,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, React.createElement(MapView, {\n    provider: PROVIDER_GOOGLE,\n    region: {\n      latitude: latlong.lat,\n      longitude: latlong.long,\n      latitudeDelta: 0.01,\n      longitudeDelta: 0.01\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, React.createElement(Marker, {\n    coordinate: {\n      latitude: latlong.lat,\n      longitude: latlong.long\n    },\n    title: \"Your location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }))), React.createElement(View, {\n    style: styles.contentContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, \"What's your address?\")), React.createElement(Text, {\n    style: styles.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }\n  }, \"address\", displayCurrentAddress)), React.createElement(Formik, {\n    initialValues: {\n      flatnumber: \"\",\n      society: \"\",\n      area: \"\",\n      location: \"\"\n    },\n    validationSchema: ReviewSchema,\n    onSubmit: function onSubmit(values, actions) {\n      console.log(values);\n      actions.resetForm();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }, function (props) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }\n    }, \"Flatnumber\"), React.createElement(TextInput, {\n      placeholder: \"flatnumber\",\n      value: props.values.flatnumber,\n      onChangeText: props.handleChange(\"flatnumber\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }\n    }, props.touched.flatnumber && props.errors.flatnumber), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, \"society\"), React.createElement(TextInput, {\n      placeholder: \"society\",\n      value: props.values.society,\n      onChangeText: props.handleChange(\"society\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }\n    }, props.touched.flatnumber && props.errors.flatnumber), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }\n    }, \"area\"), React.createElement(TextInput, {\n      placeholder: \"area\",\n      value: props.values.area,\n      onChangeText: props.handleChange(\"area\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }\n    }, props.touched.area && props.errors.area), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }, \"location\"), React.createElement(TextInput, {\n      placeholder: \"location\",\n      value: props.values.location,\n      onChangeText: props.handleChange(\"location\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }\n    }, props.touched.location && props.errors.location), React.createElement(Button, {\n      title: \"proceed\",\n      onPress: function onPress() {\n        props.handleSubmit();\n        onSubmitHandler();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }\n    }));\n  }), React.createElement(Button, {\n    title: \"next\",\n    onPress: function onPress() {\n      navigation.push('Homescreen');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 5\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'column',\n    justifyContent: 'flex-start',\n    backgroundColor: '#ffffff'\n  },\n  container1: {\n    width: '100%',\n    height: 68,\n    backgroundColor: '#ffffff'\n  },\n  container2: {\n    width: '100%',\n    height: 56,\n    paddingLeft: 25,\n    paddingTop: 17,\n    backgroundColor: '#F57503',\n    marginBottom: 30\n  },\n  container31: {\n    marginLeft: 20,\n    marginRight: 20\n  }\n});","map":{"version":3,"sources":["/Users/archingupta/Desktop/cheffyfront/cheffy-app-client/screens/location.js"],"names":["React","useEffect","useState","useRef","Formik","MapView","PROVIDER_GOOGLE","Marker","yup","Locate","axios","mobileLink","SecureStore","ReviewSchema","object","flatnumber","string","required","society","area","landmark","Location","navigation","lat","long","latlong","setlatlong","locationServiceEnabled","setLocationServiceEnabled","displayCurrentAddress","setDisplayCurrentAddress","onSubmitHandler","console","log","state","params","type","JSON","stringify","user","phone_number","email","emailid","fullname","gender","lon","getItemAsync","token","axiosConfig","headers","Authorization","post","response","push","place_of_work","placeofwork","qualification","yex","experience","CheckIfLocationEnabled","GetCurrentLocation","requestForegroundPermissionsAsync","status","Alert","alert","text","cancelable","getCurrentPositionAsync","coords","latitude","longitude","reverseGeocodeAsync","item","address","name","street","postalCode","city","hasServicesEnabledAsync","enabled","styles","container","container1","container2","container21","container3","container31","latitudeDelta","longitudeDelta","contentContainer","title","location","values","actions","resetForm","props","handleChange","touched","errors","handleSubmit","StyleSheet","create","flexDirection","justifyContent","backgroundColor","width","height","paddingLeft","paddingTop","marginBottom","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  StyleSheet,\n  Text,\n  View,\n  TextInput,\n  Button,\n  Alert,\n  ScrollView,\n} from \"react-native\";\nimport { Formik } from \"formik\";\nimport MapView, { PROVIDER_GOOGLE, Marker } from \"react-native-maps\";\nimport * as yup from \"yup\";\nimport * as Locate from \"expo-location\";\nimport axios from \"axios\";\nimport { mobileLink } from \"../links\";\nimport * as SecureStore from \"expo-secure-store\";\n\nconst ReviewSchema = yup.object({\n  flatnumber: yup.string().required(),\n  society: yup.string().required(),\n  area: yup.string().required(),\n  landmark: yup.string().required(),\n});\n\nexport default function Location({ navigation }) {\n  const [latlong, setlatlong] = useState({ lat: 0, long: 0 });\n  const [locationServiceEnabled, setLocationServiceEnabled] = useState(false);\n  const [displayCurrentAddress, setDisplayCurrentAddress] = useState(\n    \"Wait, we are fetching you location...\"\n  );\n\n  const onSubmitHandler = async () => {\n    \n    console.log(navigation.state.params);\n\n    if (navigation.state.params.type === 1) {\n      const params = JSON.stringify({\n        user: navigation.state.params.phone_number,\n        email:navigation.state.params.emailid,\n        fullname:navigation.state.params.fullname,\n        gender:navigation.state.params.gender,\n        lat:latlong.lat,\n        lon:latlong.long,\n        \n      });\n      const token = await SecureStore.getItemAsync(\"token\");\n      let axiosConfig = {\n        headers: {\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          Authorization: \"Bearer \" + token,\n        },\n      };\n\n      const response = await axios.post(\n        `${mobileLink}customer/`,\n        params,\n        axiosConfig\n      );\n\n      console.log(response);\n      navigation.push(\"Homescreen\");\n    } \n    else {\n      const params = JSON.stringify({\n        email:navigation.state.params.emailid,\n        fullname:navigation.state.params.fullname,\n        gender:navigation.state.params.gender,\n        lat:latlong.lat,\n        lon:latlong.long,\n        place_of_work:navigation.state.params.placeofwork,\n        qualification:navigation.state.params.qualification,\n        yex:navigation.state.params.experience,\n        \n      });\n      console.log(\"params\",params);\n      const token = await SecureStore.getItemAsync(\"token\");\n      let axiosConfig = {\n        headers: {\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          Authorization: \"Bearer \" + token,\n        },\n      };\n\n      const response = await axios.post(\n        `${mobileLink}partner/`,\n        params,\n        axiosConfig\n      );\n\n      console.log(response);\n\n\n\n\n      navigation.push(\"Homescreen\",{'data':navigation.state.params,'lat':latlong.lat,'long':latlong.long});\n    }\n\n    console.log(\"going to other page\");\n  };\n\n  useEffect(() => {\n    CheckIfLocationEnabled();\n    GetCurrentLocation();\n  }, []);\n\n  const GetCurrentLocation = async () => {\n    let { status } = await Locate.requestForegroundPermissionsAsync();\n\n    if (status !== \"granted\") {\n      Alert.alert(\n        \"Permission not granted\",\n        \"Allow the app to use location service.\",\n        [{ text: \"OK\" }],\n        { cancelable: false }\n      );\n    }\n\n    let { coords } = await Locate.getCurrentPositionAsync();\n\n    if (coords) {\n      const { latitude, longitude } = coords;\n      setlatlong({\n        lat: latitude,\n        long: longitude,\n      });\n      console.log(latitude, \" longi\", longitude);\n      let response = await Locate.reverseGeocodeAsync({\n        latitude,\n        longitude,\n      });\n\n      for (let item of response) {\n        let address = `${item.name}, ${item.street}, ${item.postalCode}, ${item.city}`;\n\n        setDisplayCurrentAddress(address);\n      }\n    }\n  };\n\n  const CheckIfLocationEnabled = async () => {\n    let enabled = await Locate.hasServicesEnabledAsync();\n\n    if (!enabled) {\n      Alert.alert(\n        \"Location Service not enabled\",\n        \"Please enable your location services to continue\",\n        [{ text: \"OK\" }],\n        { cancelable: false }\n      );\n    } else {\n      setLocationServiceEnabled(enabled);\n    }\n  };\n  //   const callMap=()=> {\n  //     console.log(\"hello\")\n  //     //openMap({ latitude: 37.865101, longitude: -119.538330 });\n  //   };\n  return (\n  <View style={styles.container}>\n    <View style={styles.container1}></View>\n    <View style={styles.container2}><Text style={styles.container21}>YOUR DETAILS</Text></View>\n    <View style={styles.container3}>\n      <View style={styles.container31}>\n        <MapView\n              provider={PROVIDER_GOOGLE}\n              \n              region={{\n                latitude: latlong.lat,\n                longitude: latlong.long,\n                latitudeDelta: 0.01,\n                longitudeDelta: 0.01,\n              }}\n            >\n          <Marker\n                coordinate={{\n                  latitude: latlong.lat,\n                  longitude: latlong.long,\n                }}\n                title={\"Your location\"}></Marker>\n        </MapView>\n      </View>\n      <View style={styles.contentContainer}>\n        <Text style={styles.title}>What's your address?</Text>\n      </View>\n      <Text style={styles.text}>address{displayCurrentAddress}</Text>\n    </View>\n    <Formik\n          initialValues={{\n            flatnumber: \"\",\n            society: \"\",\n            area: \"\",\n            location: \"\",\n          }}\n          validationSchema={ReviewSchema}\n          onSubmit={(values, actions) => {\n            // addreview(values);\n            console.log(values);\n            actions.resetForm();\n          }}>\n          {(props) => (\n      <View>\n        <Text>Flatnumber</Text>\n        <TextInput\n                placeholder=\"flatnumber\"\n                value={props.values.flatnumber}\n                onChangeText={props.handleChange(\"flatnumber\")}/>\n        <Text>{props.touched.flatnumber && props.errors.flatnumber}</Text>\n        <Text>society</Text>\n        <TextInput\n                placeholder=\"society\"\n                value={props.values.society}\n                onChangeText={props.handleChange(\"society\")}/>\n        <Text>{props.touched.flatnumber && props.errors.flatnumber}</Text>\n        <Text>area</Text>\n        <TextInput\n                placeholder=\"area\"\n                value={props.values.area}\n                onChangeText={props.handleChange(\"area\")}/>\n        <Text>{props.touched.area && props.errors.area}</Text>\n        <Text>location</Text>\n        <TextInput\n                placeholder=\"location\"\n                value={props.values.location}\n                onChangeText={props.handleChange(\"location\")}/>\n        <Text>{props.touched.location && props.errors.location}</Text>\n        <Button\n                title=\"proceed\"\n                onPress={() => {\n                  props.handleSubmit();\n                  onSubmitHandler();\n                }}/>\n      </View>\n          )}\n    </Formik>\n    <Button title=\"next\"   onPress={()=>{navigation.push('Homescreen')}}/>\n       \n  </View>\n    \n  );\n}\nconst styles=StyleSheet.create({\n  container:{\n    flexDirection:'column',\n    justifyContent:'flex-start',\n    backgroundColor:'#ffffff',\n  },\n  container1:{\n    width:'100%',\n    height:68,\n    backgroundColor:'#ffffff',\n    // borderWidth:2,\n    // borderColor:'black',\n    // borderStyle:'solid',\n  },\n  container2:{\n    width:'100%',\n    height:56,\n    paddingLeft:25,\n    paddingTop:17,\n    backgroundColor:'#F57503',\n    marginBottom:30,\n    // borderWidth:2,\n    // borderColor:'black',\n    // borderStyle:'solid',\n  },\n  container31:{\n    marginLeft:20,\n    marginRight:20,\n  }\n})"]},"metadata":{},"sourceType":"module"}