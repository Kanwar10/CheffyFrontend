{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\HP User\\\\native4\\\\cheffy\\\\screens\\\\location.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Formik } from \"formik\";\nimport MapView, { PROVIDER_GOOGLE, Marker } from \"react-native-maps\";\nimport * as yup from \"yup\";\nimport * as Locate from \"expo-location\";\nimport axios from \"axios\";\nimport * as SecureStore from 'expo-secure-store';\nvar ReviewSchema = yup.object({\n  flatnumber: yup.string().required(),\n  society: yup.string().required(),\n  area: yup.string().required(),\n  landmark: yup.string().required()\n});\nexport default function Location(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = useState({\n    lat: 0,\n    long: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      latlong = _useState2[0],\n      setlatlong = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      locationServiceEnabled = _useState4[0],\n      setLocationServiceEnabled = _useState4[1];\n\n  var _useState5 = useState(\"Wait, we are fetching you location...\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      displayCurrentAddress = _useState6[0],\n      setDisplayCurrentAddress = _useState6[1];\n\n  var onSubmitHandler = function onSubmitHandler() {\n    var params, token, axiosConfig, response;\n    return _regeneratorRuntime.async(function onSubmitHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(navigation.state.params);\n\n            if (!(navigation.state.params.type === 1)) {\n              _context.next = 13;\n              break;\n            }\n\n            params = JSON.stringify({\n              user: navigation.state.params.phone_number,\n              email: navigation.state.params.emailid,\n              fullname: navigation.state.params.fullname,\n              gender: navigation.state.params.gender,\n              lat: latlong.lat,\n              lon: latlong.long\n            });\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(SecureStore.getItemAsync('token'));\n\n          case 5:\n            token = _context.sent;\n            axiosConfig = {\n              headers: {\n                \"Content-Type\": \"application/json;charset=UTF-8\",\n                'Authorization': 'Bearer ' + token\n              }\n            };\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(axios.post(mobileLink + \"customer/\", params, axiosConfig));\n\n          case 9:\n            response = _context.sent;\n            console.log(response);\n            _context.next = 13;\n            break;\n\n          case 13:\n            console.log(\"going to other page\");\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    CheckIfLocationEnabled();\n    GetCurrentLocation();\n  }, []);\n\n  var GetCurrentLocation = function GetCurrentLocation() {\n    var _await$Locate$request, status, _await$Locate$getCurr, coords, latitude, longitude, response, _iterator, _step, item, address;\n\n    return _regeneratorRuntime.async(function GetCurrentLocation$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Locate.requestForegroundPermissionsAsync());\n\n          case 2:\n            _await$Locate$request = _context2.sent;\n            status = _await$Locate$request.status;\n\n            if (status !== \"granted\") {\n              Alert.alert(\"Permission not granted\", \"Allow the app to use location service.\", [{\n                text: \"OK\"\n              }], {\n                cancelable: false\n              });\n            }\n\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(Locate.getCurrentPositionAsync());\n\n          case 7:\n            _await$Locate$getCurr = _context2.sent;\n            coords = _await$Locate$getCurr.coords;\n\n            if (!coords) {\n              _context2.next = 17;\n              break;\n            }\n\n            latitude = coords.latitude, longitude = coords.longitude;\n            setlatlong({\n              lat: latitude,\n              long: longitude\n            });\n            console.log(latitude, \" longi\", longitude);\n            _context2.next = 15;\n            return _regeneratorRuntime.awrap(Locate.reverseGeocodeAsync({\n              latitude: latitude,\n              longitude: longitude\n            }));\n\n          case 15:\n            response = _context2.sent;\n\n            for (_iterator = _createForOfIteratorHelperLoose(response); !(_step = _iterator()).done;) {\n              item = _step.value;\n              address = item.name + \", \" + item.street + \", \" + item.postalCode + \", \" + item.city;\n              setDisplayCurrentAddress(address);\n            }\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var CheckIfLocationEnabled = function CheckIfLocationEnabled() {\n    var enabled;\n    return _regeneratorRuntime.async(function CheckIfLocationEnabled$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(Locate.hasServicesEnabledAsync());\n\n          case 2:\n            enabled = _context3.sent;\n\n            if (!enabled) {\n              Alert.alert(\"Location Service not enabled\", \"Please enable your location services to continue\", [{\n                text: \"OK\"\n              }], {\n                cancelable: false\n              });\n            } else {\n              setLocationServiceEnabled(enabled);\n            }\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(ScrollView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, React.createElement(MapView, {\n    provider: PROVIDER_GOOGLE,\n    style: styles.map,\n    region: {\n      latitude: latlong.lat,\n      longitude: latlong.long,\n      latitudeDelta: 0.01,\n      longitudeDelta: 0.01\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, React.createElement(Marker, {\n    coordinate: {\n      latitude: latlong.lat,\n      longitude: latlong.long\n    },\n    title: 'Your location',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }))), React.createElement(View, {\n    style: styles.contentContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, \"What's your address?\")), React.createElement(Text, {\n    style: styles.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, \"address\", displayCurrentAddress)), React.createElement(Formik, {\n    initialValues: {\n      flatnumber: '',\n      society: '',\n      area: '',\n      location: ''\n    },\n    validationSchema: ReviewSchema,\n    onSubmit: function onSubmit(values, actions) {\n      console.log(values);\n      actions.resetForm();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, function (props) {\n    return React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, \"Flatnumber\"), React.createElement(TextInput, {\n      placeholder: \"flatnumber\",\n      value: props.values.flatnumber,\n      onChangeText: props.handleChange('flatnumber'),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, props.touched.flatnumber && props.errors.flatnumber), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 25\n      }\n    }, \"society\"), React.createElement(TextInput, {\n      placeholder: \"society\",\n      value: props.values.society,\n      onChangeText: props.handleChange('society'),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, props.touched.flatnumber && props.errors.flatnumber), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, \"area\"), React.createElement(TextInput, {\n      placeholder: \"area\",\n      value: props.values.area,\n      onChangeText: props.handleChange('area'),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, props.touched.area && props.errors.area), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }\n    }, \"location\"), React.createElement(TextInput, {\n      placeholder: \"location\",\n      value: props.values.location,\n      onChangeText: props.handleChange('location'),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 25\n      }\n    }, props.touched.location && props.errors.location), React.createElement(Button, {\n      title: \"proceed\",\n      onPress: function onPress() {\n        props.handleSubmit();\n        onSubmitHandler();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    }));\n  })));\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    alignItems: \"center\",\n    paddingTop: 10\n  },\n  contentContainer: {\n    alignItems: \"center\",\n    marginBottom: 20\n  },\n  image: {\n    width: 150,\n    height: 150,\n    resizeMode: \"contain\",\n    marginBottom: 20\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: \"700\",\n    color: \"#FD0139\"\n  },\n  map: {\n    height: 300\n  },\n  text: {\n    fontSize: 20,\n    fontWeight: \"400\",\n    color: \"red\"\n  }\n});","map":{"version":3,"sources":["C:/Users/HP User/native4/cheffy/screens/location.js"],"names":["React","useEffect","useState","useRef","Formik","MapView","PROVIDER_GOOGLE","Marker","yup","Locate","axios","SecureStore","ReviewSchema","object","flatnumber","string","required","society","area","landmark","Location","navigation","lat","long","latlong","setlatlong","locationServiceEnabled","setLocationServiceEnabled","displayCurrentAddress","setDisplayCurrentAddress","onSubmitHandler","console","log","state","params","type","JSON","stringify","user","phone_number","email","emailid","fullname","gender","lon","getItemAsync","token","axiosConfig","headers","post","mobileLink","response","CheckIfLocationEnabled","GetCurrentLocation","requestForegroundPermissionsAsync","status","Alert","alert","text","cancelable","getCurrentPositionAsync","coords","latitude","longitude","reverseGeocodeAsync","item","address","name","street","postalCode","city","hasServicesEnabledAsync","enabled","styles","container","map","latitudeDelta","longitudeDelta","contentContainer","title","location","values","actions","resetForm","props","handleChange","touched","errors","handleSubmit","StyleSheet","create","backgroundColor","alignItems","paddingTop","marginBottom","image","width","height","resizeMode","fontSize","fontWeight","color"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,EAAiCC,MAAjC,QAA8C,OAA9C;;;;;;;;AAEA,SAAQC,MAAR,QAAqB,QAArB;AACA,OAAOC,OAAP,IAAkBC,eAAlB,EAAmCC,MAAnC,QAAiD,mBAAjD;AACA,OAAO,KAAKC,GAAZ,MAAoB,KAApB;AACA,OAAO,KAAKC,MAAZ,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;AAGA,IAAMC,YAAY,GAACJ,GAAG,CAACK,MAAJ,CAAW;AAC1BC,EAAAA,UAAU,EAACN,GAAG,CAACO,MAAJ,GAAaC,QAAb,EADe;AAE1BC,EAAAA,OAAO,EAACT,GAAG,CAACO,MAAJ,GAAaC,QAAb,EAFkB;AAG1BE,EAAAA,IAAI,EAACV,GAAG,CAACO,MAAJ,GAAaC,QAAb,EAHqB;AAI1BG,EAAAA,QAAQ,EAACX,GAAG,CAACO,MAAJ,GAAaC,QAAb;AAJiB,CAAX,CAAnB;AAOA,eAAe,SAASI,QAAT,OACf;AAAA;;AAAA,MADkCC,UAClC,QADkCA,UAClC;;AACE,kBAA8BnB,QAAQ,CAAC;AAAEoB,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE;AAAhB,GAAD,CAAtC;AAAA;AAAA,MAAOC,OAAP;AAAA,MAAgBC,UAAhB;;AACA,mBAA4DvB,QAAQ,CAAC,KAAD,CAApE;AAAA;AAAA,MAAOwB,sBAAP;AAAA,MAA+BC,yBAA/B;;AACA,mBAA0DzB,QAAQ,CAAC,uCAAD,CAAlE;AAAA;AAAA,MAAO0B,qBAAP;AAAA,MAA8BC,wBAA9B;;AAKA,MAAMC,eAAe,GAAC,SAAhBA,eAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBC,YAAAA,OAAO,CAACC,GAAR,CAAaX,UAAU,CAACY,KAAX,CAAiBC,MAA9B;;AADkB,kBAGfb,UAAU,CAACY,KAAX,CAAiBC,MAAjB,CAAwBC,IAAxB,KAA+B,CAHhB;AAAA;AAAA;AAAA;;AAKVD,YAAAA,MALU,GAKDE,IAAI,CAACC,SAAL,CAAe;AAC5BC,cAAAA,IAAI,EAAEjB,UAAU,CAACY,KAAX,CAAiBC,MAAjB,CAAwBK,YADF;AAE5BC,cAAAA,KAAK,EAACnB,UAAU,CAACY,KAAX,CAAiBC,MAAjB,CAAwBO,OAFF;AAG5BC,cAAAA,QAAQ,EAACrB,UAAU,CAACY,KAAX,CAAiBC,MAAjB,CAAwBQ,QAHL;AAI5BC,cAAAA,MAAM,EAACtB,UAAU,CAACY,KAAX,CAAiBC,MAAjB,CAAwBS,MAJH;AAK5BrB,cAAAA,GAAG,EAACE,OAAO,CAACF,GALgB;AAM5BsB,cAAAA,GAAG,EAACpB,OAAO,CAACD;AANgB,aAAf,CALC;AAAA;AAAA,6CAeGZ,WAAW,CAACkC,YAAZ,CAAyB,OAAzB,CAfH;;AAAA;AAeVC,YAAAA,KAfU;AAgBZC,YAAAA,WAhBY,GAgBE;AAChBC,cAAAA,OAAO,EAAE;AACP,gCAAgB,gCADT;AAEP,iCAAiB,YAAUF;AAFpB;AADO,aAhBF;AAAA;AAAA,6CA0BOpC,KAAK,CAACuC,IAAN,CAAcC,UAAd,gBAAqChB,MAArC,EAA4Ca,WAA5C,CA1BP;;AAAA;AA0BVI,YAAAA,QA1BU;AA2BZpB,YAAAA,OAAO,CAACC,GAAR,CAAYmB,QAAZ;AA3BY;AAAA;;AAAA;AAkChBpB,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;;AAlCgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAwCA/B,EAAAA,SAAS,CAAC,YAAM;AACdmD,IAAAA,sBAAsB;AACtBC,IAAAA,kBAAkB;AACnB,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAMA,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACF5C,MAAM,CAAC6C,iCAAP,EADE;;AAAA;AAAA;AACnBC,YAAAA,MADmB,yBACnBA,MADmB;;AAGzB,gBAAIA,MAAM,KAAK,SAAf,EAA0B;AACxBC,cAAAA,KAAK,CAACC,KAAN,CACE,wBADF,EAEE,wCAFF,EAGE,CAAC;AAAEC,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAHF,EAIE;AAAEC,gBAAAA,UAAU,EAAE;AAAd,eAJF;AAMD;;AAVwB;AAAA,6CAYFlD,MAAM,CAACmD,uBAAP,EAZE;;AAAA;AAAA;AAYnBC,YAAAA,MAZmB,yBAYnBA,MAZmB;;AAAA,iBAcrBA,MAdqB;AAAA;AAAA;AAAA;;AAefC,YAAAA,QAfe,GAeSD,MAfT,CAefC,QAfe,EAeLC,SAfK,GAeSF,MAfT,CAeLE,SAfK;AAgBvBtC,YAAAA,UAAU,CAAC;AACTH,cAAAA,GAAG,EAAEwC,QADI;AAETvC,cAAAA,IAAI,EAAEwC;AAFG,aAAD,CAAV;AAIAhC,YAAAA,OAAO,CAACC,GAAR,CAAY8B,QAAZ,EAAsB,QAAtB,EAAgCC,SAAhC;AApBuB;AAAA,6CAqBFtD,MAAM,CAACuD,mBAAP,CAA2B;AAC9CF,cAAAA,QAAQ,EAARA,QAD8C;AAE9CC,cAAAA,SAAS,EAATA;AAF8C,aAA3B,CArBE;;AAAA;AAqBnBZ,YAAAA,QArBmB;;AA0BvB,6DAAiBA,QAAjB,iCAA2B;AAAlBc,cAAAA,IAAkB;AACrBC,cAAAA,OADqB,GACRD,IAAI,CAACE,IADG,UACMF,IAAI,CAACG,MADX,UACsBH,IAAI,CAACI,UAD3B,UAC0CJ,IAAI,CAACK,IAD/C;AAGzBzC,cAAAA,wBAAwB,CAACqC,OAAD,CAAxB;AACD;;AA9BsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA3B;;AAkCA,MAAMd,sBAAsB,GAAG,SAAzBA,sBAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACT3C,MAAM,CAAC8D,uBAAP,EADS;;AAAA;AACzBC,YAAAA,OADyB;;AAG7B,gBAAI,CAACA,OAAL,EAAc;AACZhB,cAAAA,KAAK,CAACC,KAAN,CACE,8BADF,EAEE,kDAFF,EAGE,CAAC;AAAEC,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAHF,EAIE;AAAEC,gBAAAA,UAAU,EAAE;AAAd,eAJF;AAMD,aAPD,MAOO;AACLhC,cAAAA,yBAAyB,CAAC6C,OAAD,CAAzB;AACD;;AAZ4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA/B;;AAkBE,SACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEC,MAAM,CAACC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,OAAD;AACR,IAAA,QAAQ,EAAEpE,eADF;AAER,IAAA,KAAK,EAAEmE,MAAM,CAACE,GAFN;AAGR,IAAA,MAAM,EAAE;AACNb,MAAAA,QAAQ,EAAEtC,OAAO,CAACF,GADZ;AAENyC,MAAAA,SAAS,EAAEvC,OAAO,CAACD,IAFb;AAGNqD,MAAAA,aAAa,EAAE,IAHT;AAINC,MAAAA,cAAc,EAAE;AAJV,KAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUR,oBAAC,MAAD;AACA,IAAA,UAAU,EACR;AACEf,MAAAA,QAAQ,EAACtC,OAAO,CAACF,GADnB;AAEEyC,MAAAA,SAAS,EAACvC,OAAO,CAACD;AAFpB,KAFF;AAOE,IAAA,KAAK,EAAE,eAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVQ,CADA,CADJ,EAyBA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEkD,MAAM,CAACK,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEL,MAAM,CAACM,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,CAzBA,EA4BA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEN,MAAM,CAACf,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAkC9B,qBAAlC,CA5BA,CAFJ,EAgCI,oBAAC,MAAD;AAAQ,IAAA,aAAa,EAAE;AAACd,MAAAA,UAAU,EAAC,EAAZ;AAAeG,MAAAA,OAAO,EAAC,EAAvB;AAA0BC,MAAAA,IAAI,EAAC,EAA/B;AAAkC8D,MAAAA,QAAQ,EAAC;AAA3C,KAAvB;AACA,IAAA,gBAAgB,EAAEpE,YADlB;AAEA,IAAA,QAAQ,EAAE,kBAACqE,MAAD,EAAQC,OAAR,EAAkB;AAExBnD,MAAAA,OAAO,CAACC,GAAR,CAAYiD,MAAZ;AACAC,MAAAA,OAAO,CAACC,SAAR;AAEH,KAPD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQK,UAACC,KAAD;AAAA,WACG,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI,oBAAC,SAAD;AAAY,MAAA,WAAW,EAAC,YAAxB;AAAqC,MAAA,KAAK,EAAEA,KAAK,CAACH,MAAN,CAAanE,UAAzD;AAAqE,MAAA,YAAY,EAAEsE,KAAK,CAACC,YAAN,CAAmB,YAAnB,CAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOD,KAAK,CAACE,OAAN,CAAcxE,UAAd,IAA4BsE,KAAK,CAACG,MAAN,CAAazE,UAAhD,CAHJ,EAII,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJJ,EAKI,oBAAC,SAAD;AAAY,MAAA,WAAW,EAAC,SAAxB;AAAkC,MAAA,KAAK,EAAEsE,KAAK,CAACH,MAAN,CAAahE,OAAtD;AAA+D,MAAA,YAAY,EAAEmE,KAAK,CAACC,YAAN,CAAmB,SAAnB,CAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,EAMI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOD,KAAK,CAACE,OAAN,CAAcxE,UAAd,IAA4BsE,KAAK,CAACG,MAAN,CAAazE,UAAhD,CANJ,EAOI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPJ,EAQI,oBAAC,SAAD;AAAY,MAAA,WAAW,EAAC,MAAxB;AAA+B,MAAA,KAAK,EAAEsE,KAAK,CAACH,MAAN,CAAa/D,IAAnD;AAAyD,MAAA,YAAY,EAAEkE,KAAK,CAACC,YAAN,CAAmB,MAAnB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,EASI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOD,KAAK,CAACE,OAAN,CAAcpE,IAAd,IAAsBkE,KAAK,CAACG,MAAN,CAAarE,IAA1C,CATJ,EAUI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVJ,EAWI,oBAAC,SAAD;AAAY,MAAA,WAAW,EAAC,UAAxB;AAAmC,MAAA,KAAK,EAAEkE,KAAK,CAACH,MAAN,CAAaD,QAAvD;AAAiE,MAAA,YAAY,EAAEI,KAAK,CAACC,YAAN,CAAmB,UAAnB,CAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXJ,EAYI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOD,KAAK,CAACE,OAAN,CAAcN,QAAd,IAA0BI,KAAK,CAACG,MAAN,CAAaP,QAA9C,CAZJ,EAaI,oBAAC,MAAD;AAAS,MAAA,KAAK,EAAC,SAAf;AAAyB,MAAA,OAAO,EAAE,mBAAI;AAACI,QAAAA,KAAK,CAACI,YAAN;AAAqB1D,QAAAA,eAAe;AAAG,OAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbJ,CADH;AAAA,GARL,CAhCJ,CADF,CADF;AA+DH;AACD,IAAM2C,MAAM,GAACgB,UAAU,CAACC,MAAX,CAAkB;AAC3BhB,EAAAA,SAAS,EAAE;AACPiB,IAAAA,eAAe,EAAE,OADV;AAEPC,IAAAA,UAAU,EAAE,QAFL;AAGPC,IAAAA,UAAU,EAAE;AAHL,GADgB;AAMzBf,EAAAA,gBAAgB,EAAE;AAEhBc,IAAAA,UAAU,EAAE,QAFI;AAGhBE,IAAAA,YAAY,EAAE;AAHE,GANO;AAWzBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE,GADF;AAELC,IAAAA,MAAM,EAAE,GAFH;AAGLC,IAAAA,UAAU,EAAE,SAHP;AAILJ,IAAAA,YAAY,EAAE;AAJT,GAXkB;AAiBzBf,EAAAA,KAAK,EAAE;AACLoB,IAAAA,QAAQ,EAAE,EADL;AAELC,IAAAA,UAAU,EAAE,KAFP;AAGLC,IAAAA,KAAK,EAAE;AAHF,GAjBkB;AAsBzB1B,EAAAA,GAAG,EAAE;AACHsB,IAAAA,MAAM,EAAE;AADL,GAtBoB;AAyBzBvC,EAAAA,IAAI,EAAE;AACJyC,IAAAA,QAAQ,EAAE,EADN;AAEJC,IAAAA,UAAU,EAAE,KAFR;AAGJC,IAAAA,KAAK,EAAE;AAHH;AAzBmB,CAAlB,CAAb","sourcesContent":["import React,{useEffect,useState,useRef} from \"react\";\r\nimport {StyleSheet,Text,View,TextInput,Button,Alert,ScrollView} from \"react-native\";\r\nimport {Formik} from \"formik\";\r\nimport MapView, { PROVIDER_GOOGLE, Marker } from \"react-native-maps\";\r\nimport * as yup from\"yup\";\r\nimport * as Locate from \"expo-location\";\r\nimport axios from \"axios\";\r\nimport * as SecureStore from 'expo-secure-store';\r\n\r\n\r\nconst ReviewSchema=yup.object({\r\n    flatnumber:yup.string().required(),\r\n    society:yup.string().required(),\r\n    area:yup.string().required(),\r\n    landmark:yup.string().required(),\r\n});\r\n\r\nexport default function Location({navigation})\r\n{\r\n  const [latlong, setlatlong] = useState({ lat: 0, long: 0 });\r\n  const [locationServiceEnabled, setLocationServiceEnabled] = useState(false);\r\n  const [displayCurrentAddress, setDisplayCurrentAddress] = useState(\"Wait, we are fetching you location...\");\r\n    \r\n \r\n  \r\n  \r\n  const onSubmitHandler=async ()=>{\r\n      console.log( navigation.state.params);\r\n\r\n      if(navigation.state.params.type===1)\r\n      {\r\n        const params = JSON.stringify({\r\n          user: navigation.state.params.phone_number,\r\n          email:navigation.state.params.emailid,\r\n          fullname:navigation.state.params.fullname,\r\n          gender:navigation.state.params.gender,\r\n          lat:latlong.lat,\r\n          lon:latlong.long\r\n      \r\n\r\n        });\r\n        const token= await SecureStore.getItemAsync('token');\r\n        let axiosConfig = {\r\n          headers: {\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            'Authorization': 'Bearer '+token\r\n          },\r\n\r\n        };\r\n    \r\n    \r\n        \r\n        const response = await axios.post(`${mobileLink}customer/`, params,axiosConfig);\r\n            console.log(response);\r\n      }\r\n      else\r\n      {\r\n\r\n      }\r\n\r\n        console.log(\"going to other page\");\r\n        //navigation.push('Homescreen');\r\n    }\r\n  \r\n  \r\n\r\n  useEffect(() => {\r\n    CheckIfLocationEnabled();\r\n    GetCurrentLocation();\r\n  }, []);\r\n\r\n  const GetCurrentLocation = async () => {\r\n    let { status } = await Locate.requestForegroundPermissionsAsync();\r\n\r\n    if (status !== \"granted\") {\r\n      Alert.alert(\r\n        \"Permission not granted\",\r\n        \"Allow the app to use location service.\",\r\n        [{ text: \"OK\" }],\r\n        { cancelable: false }\r\n      );\r\n    }\r\n\r\n    let { coords } = await Locate.getCurrentPositionAsync();\r\n\r\n    if (coords) {\r\n      const { latitude, longitude } = coords;\r\n      setlatlong({\r\n        lat: latitude,\r\n        long: longitude,\r\n      });\r\n      console.log(latitude, \" longi\", longitude);\r\n      let response = await Locate.reverseGeocodeAsync({\r\n        latitude,\r\n        longitude,\r\n      });\r\n\r\n      for (let item of response) {\r\n        let address = `${item.name}, ${item.street}, ${item.postalCode}, ${item.city}`;\r\n\r\n        setDisplayCurrentAddress(address);\r\n      }\r\n    }\r\n  };\r\n\r\n  const CheckIfLocationEnabled = async () => {\r\n    let enabled = await Locate.hasServicesEnabledAsync();\r\n\r\n    if (!enabled) {\r\n      Alert.alert(\r\n        \"Location Service not enabled\",\r\n        \"Please enable your location services to continue\",\r\n        [{ text: \"OK\" }],\r\n        { cancelable: false }\r\n      );\r\n    } else {\r\n      setLocationServiceEnabled(enabled);\r\n    }\r\n  };\r\n//   const callMap=()=> {\r\n//     console.log(\"hello\")\r\n//     //openMap({ latitude: 37.865101, longitude: -119.538330 });\r\n//   };\r\n    return (\r\n      <ScrollView>\r\n        <View style={styles.container}>\r\n          \r\n            <View>\r\n                <View>\r\n                <MapView\r\n        provider={PROVIDER_GOOGLE}\r\n        style={styles.map}\r\n        region={{\r\n          latitude: latlong.lat,\r\n          longitude: latlong.long,\r\n          latitudeDelta: 0.01,\r\n          longitudeDelta: 0.01,\r\n        }}\r\n      >\r\n        <Marker\r\n        coordinate={\r\n          {\r\n            latitude:latlong.lat,\r\n            longitude:latlong.long\r\n          }\r\n        }\r\n          title={'Your location'}\r\n        >\r\n\r\n        </Marker>\r\n      </MapView>\r\n                </View>\r\n            <View style={styles.contentContainer}>\r\n                <Text style={styles.title}>What's your address?</Text>\r\n            </View>\r\n            <Text style={styles.text}>address{displayCurrentAddress}</Text>\r\n        </View>\r\n            <Formik initialValues={{flatnumber:'',society:'',area:'',location:''}}\r\n            validationSchema={ReviewSchema}\r\n            onSubmit={(values,actions)=>{\r\n                // addreview(values);\r\n                console.log(values);\r\n                actions.resetForm();\r\n                \r\n            }}>\r\n                {(props)=>(\r\n                    <View >\r\n                        <Text>Flatnumber</Text>\r\n                        <TextInput  placeholder='flatnumber' value={props.values.flatnumber} onChangeText={props.handleChange('flatnumber')}/>\r\n                        <Text>{props.touched.flatnumber && props.errors.flatnumber}</Text>\r\n                        <Text>society</Text>\r\n                        <TextInput  placeholder='society' value={props.values.society} onChangeText={props.handleChange('society')}/>\r\n                        <Text>{props.touched.flatnumber && props.errors.flatnumber}</Text>\r\n                        <Text>area</Text>\r\n                        <TextInput  placeholder='area' value={props.values.area} onChangeText={props.handleChange('area')}/>\r\n                        <Text>{props.touched.area && props.errors.area}</Text>\r\n                        <Text>location</Text>\r\n                        <TextInput  placeholder='location' value={props.values.location} onChangeText={props.handleChange('location')}/>\r\n                        <Text>{props.touched.location && props.errors.location}</Text>\r\n                        <Button  title=\"proceed\" onPress={()=>{props.handleSubmit();onSubmitHandler()}}/>\r\n                    </View>\r\n                )}\r\n        </Formik>\r\n        </View>\r\n        </ScrollView>\r\n    );\r\n}\r\nconst styles=StyleSheet.create({\r\n    container: {\r\n        backgroundColor: \"white\",\r\n        alignItems: \"center\",\r\n        paddingTop: 10,\r\n      },\r\n      contentContainer: {\r\n       \r\n        alignItems: \"center\",\r\n        marginBottom: 20,\r\n      },\r\n      image: {\r\n        width: 150,\r\n        height: 150,\r\n        resizeMode: \"contain\",\r\n        marginBottom: 20,\r\n      },\r\n      title: {\r\n        fontSize: 22,\r\n        fontWeight: \"700\",\r\n        color: \"#FD0139\",\r\n      },\r\n      map: {\r\n        height: 300,\r\n      },\r\n      text: {\r\n        fontSize: 20,\r\n        fontWeight: \"400\",\r\n        color: \"red\",\r\n      },\r\n})"]},"metadata":{},"sourceType":"module"}